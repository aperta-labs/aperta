import{error as d,warn as f,info as u,trace as p,debug as a}from"console";function n(t,i,g,e,s,o){let m={date:new Date,pid:process.pid,level:i,namespace:g,message:e};if(t(s(m)),o)return o(m)}function L(t,i){let g=[];async function e(r){if(i?.sink){if(g.push(r),i?.queue&&g.length>=i.queue)await Promise.resolve(i.sink(g))}}function s(r){return`${r.date.toDateString()} [${r.level}] [${r.namespace}] ${r.pid} ${r.message}`}let o=i?.formatter||s;return{info:(r)=>n(u,"INFO",t,r,o,i?.sink?e:void 0),error:(r)=>n(d,"ERROR",t,r,o,i?.sink?e:void 0),warn:(r)=>n(f,"WARN",t,r,o,i?.sink?e:void 0),debug:(r)=>n(a,"DEBUG",t,r,o,i?.sink?e:void 0),trace:(r)=>n(p,"TRACE",t,r,o,i?.sink?e:void 0)}}export{L as logger};
