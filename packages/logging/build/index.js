import{error as u,warn as p,info as f,trace as a,debug as l,log as k}from"console";function s(o,r,d,n,m,i,t){let g={date:new Date,pid:process.pid,level:r,namespace:d,message:n,extras:i};t?.(g),o(m(g))}function b(o,r){let d=[];async function n(t){if(r?.sink){if(d.push(t),r?.queue&&d.length>=r.queue)await Promise.resolve(r.sink(d))}}function m(t){let e=`${t.date.toDateString()} [${t.level}] [${t.namespace}] ${t.pid} ${t.message}`;if(t.extras)e+=` ${JSON.stringify(t.extras)}`;return e}let i=r?.formatter||m;return{custom:(t,e,g)=>s(k,t,o,e,i,g,r?.sink?n:void 0),info:(t,e)=>s(f,"INFO",o,t,i,e,r?.sink?n:void 0),error:(t,e)=>s(u,"ERROR",o,t,i,e,r?.sink?n:void 0),warn:(t,e)=>s(p,"WARN",o,t,i,e,r?.sink?n:void 0),debug:(t,e)=>s(l,"DEBUG",o,t,i,e,r?.sink?n:void 0),trace:(t,e)=>s(a,"TRACE",o,t,i,e,r?.sink?n:void 0)}}export{b as logger};
